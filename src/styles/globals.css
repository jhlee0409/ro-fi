@import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;400;500;600;700;900&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 262.1 83.3% 57.8%;
    --primary-foreground: 210 40% 98%;
    --secondary: 220 14.3% 95.9%;
    --secondary-foreground: 220.9 39.3% 11%;
    --muted: 220 14.3% 95.9%;
    --muted-foreground: 220 8.9% 46.1%;
    --accent: 220 14.3% 95.9%;
    --accent-foreground: 220.9 39.3% 11%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 262.1 83.3% 57.8%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 262.1 83.3% 57.8%;
    --primary-foreground: 210 40% 98%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 262.1 83.3% 57.8%;
  }
}

/* 2025 Modern Base Styles */
@layer base {
  * {
    @apply border-border;
  }
  
  html {
    font-feature-settings: "rlig" 1, "calt" 1, "kern" 1;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    scroll-behavior: smooth;
  }
  
  body {
    @apply bg-white text-ink-900 font-display;
    font-feature-settings: "kern" 1, "liga" 1;
  }
  
  /* Modern Typography Scale */
  h1, h2, h3, h4, h5, h6 {
    @apply font-display font-bold tracking-tight;
  }
  
  h1 {
    @apply text-4xl sm:text-5xl lg:text-6xl;
  }
  
  h2 {
    @apply text-3xl sm:text-4xl;
  }
  
  h3 {
    @apply text-2xl sm:text-3xl;
  }
  
  /* Selection Styling */
  ::selection {
    @apply bg-rose-200 text-ink-900;
  }
  
  ::-moz-selection {
    @apply bg-rose-200 text-ink-900;
  }
}

/* 2025 Reading Experience Components */
@layer components {
  /* Primary Reading Typography */
  .reading-content {
    @apply font-reading text-reading leading-loose text-ink-800;
    font-feature-settings: "kern" 1, "liga" 1, "clig" 1;
    text-rendering: optimizeLegibility;
    hyphens: auto;
    word-break: keep-all;
    overflow-wrap: break-word;
  }
  
  /* Enhanced Novel Content Styles */
  .novel-content {
    @apply max-w-none space-y-6;
  }
  
  /* 2025 Modern Dialogue Styles */
  .novel-dialogue {
    @apply relative text-ink-800 font-medium px-6 py-5 my-6 bg-gradient-to-r from-rose-50 to-transparent border-l-4 border-rose-400 rounded-r-2xl shadow-soft transition-all duration-300 hover:shadow-modern;
  }
  
  .novel-dialogue::before {
    content: "\201C";
    @apply absolute -left-2 top-3 text-4xl text-rose-400 font-serif opacity-30;
  }
  
  /* Modern Monologue Styles */
  .novel-monologue {
    @apply relative text-ink-700 italic font-medium px-6 py-5 my-6 bg-gradient-to-r from-ink-50 to-transparent border-l-4 border-ink-400 rounded-r-2xl shadow-soft;
  }
  
  .novel-monologue::before {
    content: "\2018";
    @apply absolute -left-2 top-3 text-4xl text-ink-400 font-serif opacity-30;
  }
  
  /* Action and Scene Descriptions */
  .novel-action {
    @apply text-stone-600 italic text-sm px-5 py-4 my-5 bg-gradient-to-r from-amber-50 to-transparent border-l-4 border-amber-400 rounded-r-xl opacity-90 transition-opacity hover:opacity-100;
  }
  
  /* Speaker Labels */
  .novel-speaker {
    @apply text-stone-500 text-sm mt-3 mb-4 ml-4 italic font-medium;
  }
  
  /* Emphasized Dialogue */
  .novel-dialogue-emphasis {
    @apply relative text-ink-900 font-bold px-6 py-5 my-6 bg-gradient-to-r from-rose-100 to-transparent border-l-4 border-rose-600 rounded-r-2xl shadow-modern;
  }
  
  /* Narrative Text */
  .novel-narrative {
    @apply text-ink-800 leading-relaxed my-6 text-justify;
  }
  
  /* Scene Breaks */
  .novel-scene-break {
    @apply my-16 border-0 text-center;
  }
  
  .novel-scene-break::after {
    content: "⋆ ⋆ ⋆";
    @apply text-stone-400 text-xl tracking-widest;
  }
  
  /* Enhanced Text Styling */
  .novel-content strong {
    @apply font-bold text-ink-900 bg-amber-100 px-1.5 py-0.5 rounded-md;
  }
  
  .novel-content em {
    @apply italic text-rose-600 font-medium;
  }
  
  /* Hover Effects */
  .novel-content blockquote:hover {
    @apply transform scale-[1.01] transition-transform duration-300;
  }
  
  /* Reading Progress Enhancement */
  .novel-content p {
    scroll-margin-top: 8rem;
    @apply mb-6;
  }
}

/* Reading Experience Optimizations */
@layer components {
  /* Chapter Navigation */
  .chapter-nav {
    @apply sticky top-0 z-50 bg-white/80 backdrop-blur-sm border-b border-stone-200;
  }
  
  /* Reading Settings Panel */
  .reading-settings {
    @apply fixed right-4 top-1/2 transform -translate-y-1/2 bg-white rounded-2xl shadow-modern border border-stone-200 p-4 space-y-4;
  }
  
  /* Font Size Controls */
  .font-size-sm .reading-content {
    @apply text-reading-sm;
  }
  
  .font-size-lg .reading-content {
    @apply text-reading-lg;
  }
  
  .font-size-xl .reading-content {
    @apply text-reading-xl;
  }
  
  /* Dark Mode Reading */
  .dark .reading-content {
    @apply text-stone-200;
  }
  
  .dark .novel-dialogue {
    @apply bg-gradient-to-r from-rose-900/20 to-transparent border-rose-400 text-stone-200;
  }
  
  .dark .novel-monologue {
    @apply bg-gradient-to-r from-ink-800/20 to-transparent border-ink-400 text-stone-300;
  }
  
  .dark .novel-action {
    @apply bg-gradient-to-r from-amber-900/20 to-transparent border-amber-400 text-stone-400;
  }
}

/* Modern Animations and Transitions */
@layer utilities {
  /* Smooth Entrance Animations */
  .animate-fade-in-up {
    animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .animate-stagger-1 {
    animation-delay: 0.1s;
  }
  
  .animate-stagger-2 {
    animation-delay: 0.2s;
  }
  
  .animate-stagger-3 {
    animation-delay: 0.3s;
  }
  
  /* Modern Shimmer Effect */
  .shimmer-modern {
    background: linear-gradient(
      110deg,
      transparent 40%,
      rgba(255, 255, 255, 0.5) 50%,
      transparent 60%
    );
    background-size: 200% 100%;
    animation: shimmer-modern 2s linear infinite;
  }
  
  /* Gradient Text */
  .text-gradient-rose {
    @apply bg-gradient-to-r from-rose-500 to-ink-600 bg-clip-text text-transparent;
  }
  
  .text-gradient-ink {
    @apply bg-gradient-to-r from-ink-600 to-ink-800 bg-clip-text text-transparent;
  }
}

/* Modern Keyframes */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes shimmer-modern {
  from {
    background-position: -200% 0;
  }
  to {
    background-position: 200% 0;
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes glow-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Responsive Design - Mobile-First */
@layer components {
  /* Mobile Optimizations (320px - 640px) */
  @media (max-width: 640px) {
    .reading-content {
      @apply text-base leading-relaxed;
      line-height: 1.7;
    }
    
    .novel-dialogue,
    .novel-dialogue-emphasis,
    .novel-monologue {
      @apply px-4 py-4 text-base mx-2;
    }
    
    .novel-action {
      @apply px-3 py-3 text-sm mx-2;
    }
    
    .novel-narrative {
      @apply text-base leading-relaxed px-2;
    }
    
    .chapter-nav {
      @apply px-4 py-3;
    }
  }
  
  /* Tablet Optimizations (641px - 1024px) */
  @media (min-width: 641px) and (max-width: 1024px) {
    .reading-content {
      @apply text-lg leading-relaxed;
      line-height: 1.75;
    }
    
    .novel-dialogue,
    .novel-dialogue-emphasis,
    .novel-monologue {
      @apply px-5 py-4;
    }
  }
  
  /* Desktop Optimizations (1025px+) */
  @media (min-width: 1025px) {
    .reading-content {
      @apply text-reading leading-loose;
      line-height: 1.8;
    }
    
    /* Desktop-specific reading enhancements */
    .novel-content {
      max-width: 70ch; /* Optimal reading line length */
    }
  }
  
  /* Large Desktop (1440px+) */
  @media (min-width: 1440px) {
    .reading-content {
      @apply text-reading-lg;
      line-height: 1.85;
    }
  }
}

/* Accessibility and Performance */
@layer base {
  /* Focus Management */
  .novel-content *:focus-visible {
    @apply outline-none ring-2 ring-rose-500 ring-offset-2 rounded-lg;
  }
  
  /* Screen Reader Support */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
  }
  
  /* High Contrast Mode */
  @media (prefers-contrast: high) {
    .novel-dialogue {
      @apply border-l-8 bg-rose-200 text-ink-950;
    }
    
    .novel-monologue {
      @apply border-l-8 bg-ink-200 text-ink-950;
    }
    
    .novel-action {
      @apply border-l-8 bg-amber-200 text-ink-950;
    }
  }
  
  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .animate-fade-in-up,
    .animate-float,
    .animate-glow-pulse,
    * {
      animation: none !important;
      transition: none !important;
    }
  }
  
  /* Dark Mode Preferences */
  @media (prefers-color-scheme: dark) {
    :root {
      color-scheme: dark;
    }
  }
}

/* Print Styles */
@media print {
  .chapter-nav,
  .reading-settings,
  .no-print {
    display: none !important;
  }
  
  .reading-content {
    @apply text-black font-serif text-sm leading-relaxed;
  }
  
  .novel-dialogue,
  .novel-monologue,
  .novel-action {
    @apply bg-none border-l-2 border-black shadow-none;
  }
}